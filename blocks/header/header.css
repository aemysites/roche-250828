.header {
    --trigger-button-size-mobile: var(--nav-height);

    align-items: center;
    background-color: var(--white);
    display: flex;
    flex-direction: row;
    height: var(--nav-height);
    justify-content: space-between;
    inset-inline-start: 0;
    position: fixed;
    inset-block-start: 0;
    width: 100%;
    z-index: 10;
}

@media screen and (width >= 1025px) {
    .header {
        background: none;
        height: auto;
        position: static;
    }
}

.nav-wrapper {
    height: 100%;
    width: 100%;
}

.nav {
    align-items: center;
    display: flex;
    flex-direction: row;
    height: 100%;
    width: 100%;
}

.nav-top-bar {
    align-items: center;
    display: flex;
    flex-grow: 1;
    gap: 15px;
    margin-inline-start: var(--trigger-button-size-mobile);
    padding-inline: 15px;
    justify-content: center;

    a {
        flex-shrink: 0;
    }

    img {
        display: block;
    }
}

.nav-top-bar__primary-logo img {
    height: 42px;
}

.nav-top-bar__secondary-logo img {
    height: 25px;
}

@media screen and (width < 1025px) {
    .nav-search {
        background: var(--white);
        bottom: 0;
        display: flex;
        flex-flow: column;
        height: calc(100dvh - var(--header-height));
        left: 0;
        overflow: auto;
        padding: 50px 25px 25px;
        pointer-events: none;
        position: fixed;
        top: 58px;
        transform: translateX(-100%);
        transition: transform .3s ease-in-out;
        width: 100%;
        z-index: 10;

        &.expanded {
            pointer-events: auto;
            transform: none;
        }

        .search-box {
            border: 1px solid var(--secondary-color);
        }
    }

    .nav-search .search__suggestions {
        padding: 70px 0 35px;
    }
}

@media screen and (width >= 1025px) {
    .nav-top-bar {
        align-items: start;
        padding: 40px 38px 0;
        width: 100%;
        gap: 0;
        margin-inline-start: var(--sidebar-width);
    }

    .nav-top-bar__primary-logo img {
        width: 140px;
        height: 107px;
    }

    .nav-top-bar__secondary-logo img {
        height: 38px;
    }

    .nav-search {
        background: none;
        border: none;
        justify-content: end;
        display: inline-flex;
        flex-grow: 1;
        margin-inline: 30px 10px;

        .search-wrapper {
            width: 550px;
        }
    }
}

.nav-hamburger button {
    align-items: center;
    background-color: var(--primary-color);
    border: none;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 5px;
    height: var(--trigger-button-size-mobile);
    justify-content: center;
    width: var(--trigger-button-size-mobile);
}

@media screen and (width >= 1025px) {
    .nav-hamburger button {
        height: auto;
        padding: 25px 0;
        width: 100%;
    }
}

.nav-hamburger-icon {
    width: 16px;
    height: 13px;
    margin: 0;
    display: inline-block;
    -webkit-touch-callout: none;
    user-select: none;
    transform: rotate(0);
    transition: transform .75s cubic-bezier(.19,1,.22,1);
}

.nav-hamburger-icon__stroke {
    height: 2px;
    left: 0;
    opacity: 1;
    overflow: hidden;
    position: absolute;
    width: 100%;
}

.nav-hamburger-icon__stroke::after {
    transform: translate(100%);
}

.nav-hamburger-icon__stroke::before {
    transform: translate(0);
}

.nav-hamburger-icon__stroke::before,
.nav-hamburger-icon__stroke::after {
    background-color: var(--secondary-color);
    content: "";
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    transition: transform .25s ease-out .4s, background-color .25s ease-out .5s;
    width: 100%;
}

.nav-hamburger-icon__start {
    top: 0;
    transition: top .1s ease-out .35s, transform .25s ease-out 0s;
}

.nav-hamburger-icon__mid {
    top: 6px;
    transition: transform .25s ease-out 0s, opacity .1s ease-out;
    transform: rotate(0) scale(1);
}

.nav-hamburger-icon__end {
    top: 12px;
    transition: top .1s ease-out .35s, opacity 0s ease-out .35s;
}

.nav-hamburger__label {
    font-size: 12px;
    color: var(--secondary-color);
}

.nav-hamburger .nav-close-icon {
    display: none;
}

@media screen and (width >= 1025px) {
    .nav-hamburger__label {
        font-size: 14px;
    }

    .nav-hamburger button:hover {
        font-style: italic;

        .nav-hamburger-icon__stroke::before,
        .nav-hamburger-icon__stroke::after {
            transform: translate(-100%);
        }

        .nav-hamburger-icon__start::before {
            transform: translate(-100%);
            transition: transform .25s ease-out 0s, background-color .25s ease-out .5s;
        }

        .nav-hamburger-icon__mid::before {
            transform: translate(-100%);
            transition: transform .25s ease-out .1s, background-color .25s ease-out .5s;
        }

        .nav-hamburger-icon__end::before {
            transform: translate(-100%);
            transition: transform .25s ease-out .2s, background-color .25s ease-out .5s;
        }

        .nav-hamburger-icon__start::after {
            transform: translate(0);
            transition: transform .25s ease-out .2s, background-color .25s ease-out .5s;
        }

        .nav-hamburger-icon__mid::after {
            transform: translate(0);
            transition: transform .25s ease-out .3s, background-color .25s ease-out .5s;
        }

        .nav-hamburger-icon__end::after {
            transform: translate(0);
            transition: transform .25s ease-out .4s, background-color .25s ease-out .5s;
        }
    }
}

.nav-search-trigger button {
    align-items: center;
    background-color: var(--secondary-color);
    border: none;
    cursor: pointer;
    display: flex;
    height: var(--trigger-button-size-mobile);
    justify-content: center;
    width: var(--trigger-button-size-mobile);
}

@media screen and (width >= 1025px) {
    .nav-search-trigger {
        display: none;
    }
}

.nav-close {
    display: none;
    flex-shrink: 1;
}

@media screen and (width >= 1025px) {
    .nav-close {
        display: flex;
    }
}

.nav-close button {
    align-items: center;
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    gap: 20px;
    justify-content: start;
    padding: 0;
    width: 100%;

    &:hover {
        font-style: italic;
    }
}

.nav-close-icon {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 16px;
    height: 13px;
}

.nav-close-icon__cross {
    align-items: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    margin-top: -2px;
    width: 18px;

    &::before, &::after {
        background: var(--secondary-color);
        content: "";
        display: block;
        height: 2px;
        position: absolute;
        width: 18px;
    }
}

.nav-close__label {
    color: var(--secondary-color);
    font-family: var(--body-font-family);
    font-size: 14px;
}

.nav-menu {
    background-color: var(--primary-color);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: calc(100dvh - var(--header-height));
    inset-block-start: var(--header-height);
    max-width: 520px;
    padding: 50px 25px 25px;
    pointer-events: none;
    position: absolute;
    transform: translate(-100%);
    transition: transform .4s ease-in-out;
    width: 100%;
    will-change: transform;
    z-index: 80;
}

@media screen and (width >= 1025px) {
    .nav-menu {
        padding: 40px 40px 25px;
    }
}

.nav-sidebar {
    background: var(--primary-color);
    position: fixed;
    height: 100dvh;
    inset-block-start: 0;
    width: var(--sidebar-width);
}

.nav-sidebar__accent {
    height: 90%;
    inset-block-end: 0;
    inset-inline-start: calc(100% - 1px);
    position: absolute;
    width: auto;
}

.nav-sidebar__logo {
    display: none;
}

@media screen and (width >= 1025px) {
    .nav-sidebar {
        background-color: var(--primary-color);
        width: 72px;
    }

    .nav-sidebar__logo {
        background-color: var(--secondary-color);
        display: flex;
        padding: 16px 10px;
        transform: translateY(-70px);
        will-change: transform;
        transition: transform .5s ease;

        &.show {
            transform: none;

            + .nav-hamburger {
                transform: none;
            }
        }
    }

    .nav-hamburger {
        transform: translateY(-70px);
        will-change: transform;
        transition: transform .5s ease;
    }
}

.nav-secondary-menu {
    ul {
        display: flex;
        flex-direction: column;
        padding: 0;
        margin: 25px 0;
    }

    li {
        border-bottom: solid 1px rgb(20 85 122 / 20%);
        padding: 20px 0;
    }

    a {
        align-items: center;
        color: var(--secondary-color);
        display: flex;
        flex-direction: row;
        font-family: var(--heading-font-family);
        font-size: 22px;
        font-style: italic;
        gap: 10px;
        font-weight: var(--bold);
        line-height: 22px;
        justify-content: center;
        margin-top: 4px;
        text-decoration: none;
    }
}

@media screen and (width >= 1025px) {
    .nav-secondary-menu {
        a {
            gap: 20px;
            justify-content: start;
        }
    }
}

.nav-sections {
    flex-grow: 1;

    ul {
        display: flex;
        flex-direction: column;
        gap: 25px;
        margin: 0;
        padding: 0;
    }

    .nav-link__text {
        position: relative;

        /* Animated underline on select and hover */
        &::after {
            background-color: var(--secondary-color);
            bottom: -1px;
            content: "";
            height: 2px;
            left: 0;
            position: absolute;
            right: 0;
            transform: scaleX(0);
            transform-origin: left center;
            transition: transform cubic-bezier(.62, .05, .01, .98) 1s;
        }
    }

    .nav-link {
        align-items: center;
        color: var(--secondary-color);
        display: flex;
        font-size: 30px;
        gap: 20px;
        font-family: var(--heading-font-family);
        font-style: italic;
        font-weight: var(--bold);
        line-height: 26px;
        text-decoration: none;
        width: 100%;

        @media screen and (width >= 1025px) {
            &:hover .nav-link__text::after {
                transform: scaleX(1);
            }
        }
    }

    .nav-root-item {
        /* Top level */
        &:not(.nav-drop) {
            padding-inline-start: 40px;
        }

        /* Top level with submenu */
        &.nav-drop {
            & > p .nav-link::before {
                background-repeat: no-repeat;
                background-image: url('../../icons/plus.svg');
                background-position-y: center;
                content: '';
                flex-shrink: 0;
                height: 20px;
                width: 20px;
            }

            &[aria-expanded="true"] {
                > p .nav-link::before {
                    background-image: url('../../icons/moins.svg');
                }
            }
        }
    }

    .nav-nested {
        /* Nested levels */
        .nav-link {
            color: var(--secondary-color);
            font-size: 16px;
            line-height: 1.3;
            font-family: var(--body-font-family);
            font-style: normal;
            font-weight: unset;
            text-decoration: none;
        }
    }

    .nav-submenu {
        display: none;
        gap: 15px;
        padding: 20px 20px 10px 40px;
        width: 100%;
    }

    .nav-drop {
        &.nav-nested {
            > p .nav-link__text::after {
                height: 1px;
            }
        }

        &[aria-expanded="true"] {
            /* Animated underline on select and hover */
            > p .nav-link__text::after {
                transform-origin: right center;
                transform: scaleX(1);
            }

            &.nav-nested {
                > p .nav-link {
                    font-weight: var(--bold);
                }
            }

            /* Show nested menu */
            > .nav-submenu {
                display: flex;
            }
        }
    }
}

@media screen and (width >= 1025px) {
    .nav-sections {
        padding: 100px 0 0;

        ul {
            gap: 30px;
        }

        li {
            opacity: 0;
            transition: opacity .6s ease, transform .6s ease;
            transform: translateX(-15px);
            will-change: opacity;
        }

        .nav-link {
            font-size: 46px;
            line-height: 46px;
        }

        .nav-nested .nav-link:hover {
            font-style: italic;
        }

        .nav-submenu {
            background-color: var(--light-yellow);
            display: flex;
            height: 100dvh;
            gap: 15px;
            inset-inline-start: 100%;
            inset-block-start: 0;
            opacity: 0;
            padding: 140px 60px 40px 80px;
            pointer-events: none;
            position: absolute;
            transform: translateX(-100%);
            width: 385px;
            will-change: transform;
            z-index: -1;

            .nav-submenu::before {
                background-color: rgb(20 85 122 / 20%);
                content: "";
                height: 513px;
                inset-inline-start: 0;
                position: absolute;
                top: 140px;
                width: 1px;
            }
        }

        .nav-drop[aria-expanded="true"] > .nav-submenu {
            opacity: 1;
            pointer-events: auto;
            transform: none;
            transition: transform .4s ease-in-out, opacity .3s ease-in-out;
        }
    }
}

.nav-panel-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 70;
    background: rgb(0 0 0 / 60%);
}

.nav[aria-expanded="true"] {
    .nav-hamburger .nav-close-icon {
        display: flex;
    }

    .nav-hamburger-icon {
        display: none;
    }

    .nav-menu {
        transform: none;
        pointer-events: auto;
    }

    .nav-close-icon__cross::before {
        animation: xBefore .7s forwards;
        animation-iteration-count: 1;
    }

    .nav-close-icon__cross::after {
        animation: xAfter .7s forwards;
        animation-iteration-count: 1;
    }
}

@media screen and (width >= 1025px) {
    .nav[aria-expanded="true"] {
        .nav-sections {
            .nav-root-item,
            .nav-drop[aria-expanded="true"] > .nav-submenu > li {
                opacity: 1;
                transform: none;

                &:nth-child(1n) {
                    transition-delay: 70ms;
                }

                &:nth-child(2n) {
                    transition-delay: .14s
                }

                &:nth-child(3n) {
                    transition-delay: .21s
                }

                &:nth-child(4n) {
                    transition-delay: .28s
                }

                &:nth-child(5n) {
                    transition-delay: .35s
                }

                &:nth-child(6n) {
                    transition-delay: .42s
                }

                &:nth-child(7n) {
                    transition-delay: .49s
                }

                &:nth-child(8n) {
                    transition-delay: .56s
                }

                &:nth-child(9n) {
                    transition-delay: .63s
                }

                &:nth-child(10n) {
                    transition-delay: .7s
                }
            }
        }

        .nav-panel-overlay {
            display: block;
        }
    }
}

@keyframes xBefore {
    50% {
        transform: rotate(0)
    }

    100% {
        transform: rotate(45deg)
    }
}

@keyframes xAfter {
    50% {
        transform: rotate(0)
    }

    100% {
        transform: rotate(-45deg)
    }
}
